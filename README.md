# SMB Assistant

–ü–æ–º–æ—â–Ω–∏–∫ –º–∞–ª–æ–≥–æ –∏ —Å—Ä–µ–¥–Ω–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞: —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ —á–∏—Å—Ç–æ–º HTML/CSS/JS –∏ FastAPI-–±—ç–∫–µ–Ω–¥ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π OpenRouter –∏ e‚Äëmail –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±—ç–∫–µ–Ω–¥–∞**
   ```bash
   cd server
   python -m venv .venv
   source .venv/bin/activate    # Windows: .venv\Scripts\activate
   pip install -r requirements.txt
   ```
2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `server/.env`**
   ```env
   OPENROUTER_API_KEY=–≤–∞—à_–∫–ª—é—á
   OPENROUTER_MODEL=deepseek/deepseek-r1-0528-qwen3-8b:free
   CORS_ORIGINS=http://127.0.0.1:8000
   OPENROUTER_SITE_URL=http://127.0.0.1:8000
   OPENROUTER_APP_NAME=SMB Assistant

   SMTP_HOST=smtp.yandex.ru
   SMTP_PORT=587
   SMTP_USERNAME=–≤–∞—à_–ª–æ–≥–∏–Ω@yandex.ru
   SMTP_PASSWORD=–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   SMTP_FROM_EMAIL=–≤–∞—à_–ª–æ–≥–∏–Ω@yandex.ru
   SMTP_FROM_NAME=SMB Assistant
   AUTH_CODE_TTL=600
   ```
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ FastAPI**
   ```bash
   uvicorn main:app --reload --host 127.0.0.1 --port 8000
   ```
4. **–ü–æ–¥–Ω–∏–º–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥** (–ª—é–±–æ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–µ—Ä)
   ```bash
   # –ø—Ä–∏–º–µ—Ä
   npx serve .
   # –∏–ª–∏ python -m http.server 5500
   ```
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**
   - API: `http://127.0.0.1:8000/health` ‚Üí `{ "status": "ok" }`
   - –§—Ä–æ–Ω—Ç–µ–Ω–¥: –æ—Ç–∫—Ä–æ–π—Ç–µ `index.html` (–∏–ª–∏ –∞–¥—Ä–µ—Å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞).

> `window.BACKEND_BASE_URL = "http://127.0.0.1:8000";` –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ø–µ—Ä–µ–¥ `renderMainApp()` –≤ `scripts/app.js`, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π –∞–¥—Ä–µ—Å.

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `server/.env` –∑–∞–ø–æ–ª–Ω–µ–Ω (—Å–º. –≤—ã—à–µ).
2. –ü–æ–¥–Ω–∏–º–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
   ```bash
   docker-compose up --build
   ```
3. –î–æ—Å—Ç—É–ø—ã:
   - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Üí `http://127.0.0.1:3000`
   - –±—ç–∫–µ–Ω–¥ ‚Üí `http://127.0.0.1:8000`
4. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
   ```bash
   docker-compose down
   ```

`docker-compose.yml` —Å–æ–±–µ—Ä—ë—Ç –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
- `backend`: FastAPI + uvicorn (`server/Dockerfile`)
- `frontend`: Nginx, –æ–±—Å–ª—É–∂–∏–≤–∞—é—â–∏–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (`docker/frontend/Dockerfile` + `docker/nginx/default.conf`)

---

## üì° API, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

| Endpoint               | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|------------------------|-------|-------------------------------------------|
| `/chat`                | POST  | –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ OpenRouter   |
| `/auth/request-code`   | POST  | –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –Ω–∞ e‚Äëmail        |
| `/auth/verify-code`    | POST  | –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞, –≤—ã–¥–∞—ë—Ç `{"detail": "Verified"}` |
| `/health`              | GET   | –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞                  |

–ü–æ—á—Ç–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ SMTP: –∫–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ, —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ —Å TTL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 –º–∏–Ω—É—Ç) –∏ –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏.

---

## ‚öôÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- **–ú–æ–¥–µ–ª—å OpenRouter** ‚Äî –º–µ–Ω—è–π—Ç–µ `OPENROUTER_MODEL` –≤ `.env` (–Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ `anthropic/claude-3-sonnet:beta`).
- **–ü–æ—Ä—Ç/–¥–æ–º–µ–Ω —Ñ—Ä–æ–Ω—Ç–∞** ‚Äî —É–∫–∞–∂–∏—Ç–µ –≤ `CORS_ORIGINS`, –∞ —Ç–∞–∫–∂–µ –∏–∑–º–µ–Ω–∏—Ç–µ `window.BACKEND_BASE_URL` –Ω–∞ UI.
- **–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–∏—Å–µ–º** ‚Äî –¥–ª—è –º–Ω–æ–≥–∏—Ö SMTP (Yandex, Gmail) –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –æ–±—è–∑–∞–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ª–æ–≥–∏–Ω–æ–º. –ò–Ω–∞—á–µ –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É `553 Sender address rejected`.
- **TTL –∫–æ–¥–∞** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `AUTH_CODE_TTL` (—Å–µ–∫—É–Ω–¥—ã).

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Hakaton/
‚îú‚îÄ index.html / scripts / styles / images  # —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ server/
‚îÇ  ‚îú‚îÄ main.py          # FastAPI + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OpenRouter + SMTP
‚îÇ  ‚îú‚îÄ requirements.txt
‚îÇ  ‚îî‚îÄ Dockerfile
‚îú‚îÄ docker/
‚îÇ  ‚îú‚îÄ frontend/Dockerfile
‚îÇ  ‚îî‚îÄ nginx/default.conf
‚îú‚îÄ docker-compose.yml
‚îî‚îÄ README.md
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

1. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ –∫–æ–¥: –∫–Ω–æ–ø–∫–∞ ¬´–í–æ–π—Ç–∏¬ª ‚Üí —É–∫–∞–∂–∏—Ç–µ e‚Äëmail ‚Üí –≤–æ –≤–∫–ª–∞–¥–∫–µ —Å–µ—Ç–∏/–ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è `POST /auth/request-code` (200).
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞: `POST /auth/verify-code` ‚Üí 200. –ü–æ—Å–ª–µ —É–¥–∞—á–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ e‚Äëmail –ø–æ—è–≤–∏—Ç—Å—è –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤–º–µ—Å—Ç–æ ¬´–ì–æ—Å—Ç—å¬ª.
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç ‚Äî UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã OpenRouter, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Ä–µ–∂–∏–º –æ–±—â–µ–Ω–∏—è.

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—á—Ç–æ–π, –∑–∞–≥–ª—è–Ω–∏—Ç–µ –≤ –ª–æ–≥–∏ backend (—Ç–∞–º –±—É–¥–µ—Ç –ø—Ä–∏—á–∏–Ω–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `5.7.1 Sender address rejected`).

–£–¥–∞—á–∏ –∏ —Ö–æ—Ä–æ—à–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π! üöÄ
